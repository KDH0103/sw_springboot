<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smhrd.web.mapper.BoardMapper">

	<select id="selectBoard" resultType="Board">
		  SELECT * FROM board
		  order by indate desc
	</select>
	
	<insert id="InsertBoard" parameterType="Board">
	    INSERT INTO board (bnum, title, writer, content)
	    VALUES (board_num.nextval, #{title}, #{writer}, #{content})
	</insert>
	
	<select id="search" 
			parameterType="SearchCriteria" resultType="Board">
		SELECT * FROM BOARD
		WHERE ${filter} LIKE '%' || #{search}||'%'
		<!--  <include refid="searchOption"/>-->
	</select>
	
	<sql id="searchOption">
		<if test="filter=='content'">
		WHERE content LIKE '%' || #{search}||'%'
		</if>
		<if test="filter=='title'">
		WHERE title LIKE '%' || #{search}||'%'
		</if>
		<if test="filter=='writer'">
		WHERE writer LIKE '%' || #{search}||'%'
		</if>
		
	</sql>


</mapper>
